<!DOCTYPE html>
<html lang="en" data-theme="light">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>YAID</title>
		<link
			rel="icon"
			href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ†”</text></svg>"
		/>

		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
		/>

		<script type="module">
			import { New, Parse } from "./yaid-ts/yaid.js";

			function showError(err) {
				if (err) {
					yaid.setAttribute("aria-invalid", "true");
					errorBox.style.display = "block";
					errorBox.innerText = err;
				} else {
					yaid.setAttribute("aria-invalid", "false");
					errorBox.style.display = "none";
				}
			}

			function updateInfo(y) {
				time.innerText = y.time().toUTCString();
				meta.innerText = y.meta();
				bytes.innerText = y.bytes;
			}

			window.update = function () {
				console.log("UPDATE");
				try {
					const y = Parse(yaid.value);
					updateInfo(y);
					showError();
				} catch (err) {
					showError(err);
				}
			};

			window.generate = function () {
				const y = New();
				yaid.value = y;
				updateInfo(y);
			};

			generate();
		</script>
	</head>
	<body>
		<nav class="container-fluid">
			<ul>
				<li>
					<a href="./" class="contrast">
						<b>ðŸ†” YAID</b>
					</a>
				</li>
			</ul>
			<ul>
				<li>
					<details role="list">
						<summary aria-haspopup="listbox" role="link" class="secondary">
							Examples (v1)
						</summary>
						<ul role="listbox">
							<li><a href="yaid-js">Preview</a></li>
							<li><a href="../v1-preview-rtl/">Right-to-left</a></li>
							<li><a href="../v1-classless/">Classless</a></li>
						</ul>
					</details>
				</li>
			</ul>
		</nav>

		<div class="container">
			<i>Yet Another ID</i>

			<div class="grid">
				<article>
					<header>YAID</header>
					<input id="yaid" type="text" min="8" oninput="update()" />
					<button onclick="generate()">Generate</button>
					<mark id="errorBox"></mark>
				</article>
				<article>
					<header>Info</header>
					<b>Time:</b> <span id="time"></span><br />
					<b>Meta:</b> <span id="meta"></span><br />
					<b>Bytes:</b> [<span id="bytes"></span>]<br />
				</article>
			</div>

			<h2>Specifications</h2>

			REPLACE_ME
		</div>
	</body>
</html>
